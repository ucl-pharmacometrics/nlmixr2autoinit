% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_tad.R
\name{calculate_tad}
\alias{calculate_tad}
\title{Calculate time after dose (TAD) for pharmacokinetic aata}
\usage{
calculate_tad(dat)
}
\arguments{
\item{dat}{A pharmacokinetic dataset containing:
\itemize{
\item \strong{Required columns}: \code{ID}, \code{TIME}, \code{EVID}, \code{AMT}
}}
}
\value{
A modified dataframe with added columns:
\itemize{
\item \code{tad}: Time after dose (calculated as TIME minus the time of the most recent prior dose) for observations (\code{EVID == 0}); \code{NA} for dosing records.
\item \code{iiobs}: The inter-dose interval inherited from the most recent dose, applied to observation rows.
\item \code{rateobs}: The infusion rate inherited from the most recent dose, applied to observation rows.
\item \code{routeobs} \emph{(optional)}: The administration route inherited from the most recent dose, applied to observation rows. This column is only included if the \code{route} information is available.
\item \code{dose_number}: Sequential dose number, automatically generated if not already present.
}
}
\description{
Computes time after dose (TAD) for pharmacokinetic observations. For observation records,
propagates dosing information from the most recent dose administration.
}
\details{
\subsection{Key Operations:}{
\enumerate{
\item \strong{Propagation of Dose Information}:
\itemize{
\item For \strong{observation rows} (\code{EVID == 0}):
\itemize{
\item \code{iiobs}, \code{rateobs}, and \code{routeobs} inherit values from the most recent prior dose
\item \code{tad} is calculated as the time since the last dose
}
\item For \strong{dose rows} (\code{EVID \%in\% c(1, 101, 4)}):
\itemize{
\item Retains original values for \code{II}, \code{RATE}, and \code{route}
\item Serves as the reference point for subsequent \code{tad} calculations
}
}
\item \strong{Dose Number Assignment}:
\itemize{
\item Automatically generates a sequential \code{dose_number} using \code{mark_dose_number()} if not already present
\item Preserves existing \code{dose_number} values if available
}
}
}
}
\examples{
# Bolus dosing
calculate_tad(Bolus_1CPT)
calculate_tad(Infusion_1CPT)
calculate_tad(Oral_1CPT)

}
