% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/processData.R
\name{processData}
\alias{processData}
\title{Process Pharmacokinetic Dataset for Analysis}
\usage{
processData(dat)
}
\arguments{
\item{dat}{A data frame containing raw pharmacokinetic data. Expected (case-insensitive) columns include:
\describe{
\item{ID}{Subject identifier}
\item{TIME}{Time after dose}
\item{DV}{Dependent variable (e.g., plasma concentration)}
\item{MDV}{Missing dependent variable indicator}
\item{EVID}{Event identifier (e.g., dose, observation)}
\item{AMT}{Dose amount}
\item{RATE}{Infusion rate (optional)}
\item{DUR}{Duration of infusion (optional)}
\item{ADDL}{Additional doses (optional)}
\item{II}{Interdose interval (optional)}
\item{SS}{Steady-state indicator (optional)}
\item{CMT}{Compartment (optional)}
\item{CENS}{Censoring indicator (optional)}
}}
}
\value{
A list with two components:
\describe{
\item{dat}{Processed full dataset with standardized variables and derived columns:
\code{resetflag}, \code{SSflag}, \code{route}, \code{dose_number}, \code{DVstd},
\code{indiv_lambda_z_eligible}, and others.}
\item{Datainfo}{A formatted summary table of dataset structure, subject counts, and observation counts for
first-dose and multiple-dose conditions, with contextual notes.}
}
}
\description{
Processes a pharmacokinetic (PK) dataset to derive analysis-ready variables and structure.
}
\details{
This function performs several operations critical for PK data preprocessing:
\enumerate{
\item \strong{Standardization}: Converts column names to uppercase; coerces numeric columns to appropriate types.
\item \strong{Event Processing}: Imputes \code{EVID} from \code{MDV} if missing; handles censored observations; filters invalid \code{EVID=2} records.
\item \strong{Flag Generation}:
\itemize{
\item \code{resetflag}: Identifies segments between distinct dose events or steady-state switches.
\item \code{SSflag}: Flags rows within steady-state observation windows.
}
\item \strong{Infusion and Route Logic}: Calculates \code{RATE} from \code{AMT} and \code{DUR} if needed; classifies administration route (oral, infusion, bolus).
\item \strong{Compartment Checks}: Ensures a maximum of two unique \code{CMT} values per subject and dosing interval.
\item \strong{Dose Expansion}: Expands rows using \code{ADDL}/\code{II} if present via \code{nmpkconvert()}.
\item \strong{Derived Metrics}:
\itemize{
\item \code{dose_number}: Count of dose administrations per subject.
\item \code{tad}: Time after last dose.
\item \code{DVstd}: Normalized dependent variable (DV/dose).
\item \code{indiv_lambda_z_eligible}: Eligibility flag for elimination phase based on route and time of maximum DV.
}
\item \strong{Summary Generation}: Constructs a summary table of route, subjects, and observations across first- and multiple-dose data.
}
}
\examples{

dat <- Bolus_1CPT
results <- processData(dat)
head(results$dat)
cat(results$Datainfo)

}
