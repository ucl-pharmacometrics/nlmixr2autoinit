% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_pooled_data.R
\name{get_pooled_data}
\alias{get_pooled_data}
\title{Generate pooled data for pharmacokinetic analysis}
\usage{
get_pooled_data(dat, data_type = "first_dose", ...)
}
\arguments{
\item{dat}{A data frame containing pharmacokinetic data. The required columns depend on \code{data_type}:
\itemize{
\item \code{"first_dose"}: \code{dose_number}, \code{iiobs}, \code{ID}, \code{TIME}, \code{DV}
\item \code{"repeated_doses"}: \code{EVID}, \code{AMT}, \code{tad}, \code{dose_number}, \code{iiobs}, \code{ID}, \code{TIME}, \code{DV}, \code{resetflag}
\item \code{"combined_doses"}: \code{EVID}, \code{tad}, \code{dose_number}, \code{ID}, \code{TIME}, \code{DV}, \code{resetflag}
}}

\item{data_type}{Character string indicating the type of data to pool.
One of \code{"first_dose"}, \code{"repeated_doses"}, or \code{"combined_doses"}.
\itemize{
\item \code{"first_dose"} processes only the first dose of each subject.
\item \code{"repeated_doses"} processes doses beyond the first and their post-dose observations.
\item \code{"combined_doses"} merges both first and repeated dose data into a single dataset for pooled analysis.
}}

\item{...}{Additional arguments passed to \code{bin.time()}, such as \code{nbins} or \code{bin.method}.}
}
\value{
A list containing one or more elements, depending on the specified \code{data_type}:
\describe{
\item{\code{datpooled_fd}}{Binned data corresponding to the first dose only, typically used for single-dose NCA.}
\item{\code{datpooled_efd}}{Binned data excluding the first dose, representing repeated-dose profiles.}
\item{\code{datpooled_all}}{Binned data that combines both first and repeated doses into a single dataset,
used when \code{data_type = "combined_doses"} for pooled overall profile analysis.}
}
}
\description{
Processes pharmacokinetic (PK) data and produces pooled datasets for based on
the specified dosing scenario.
}
\details{
For \code{"repeated_doses"} and \code{"combined_doses"} analyses, the function calculates the most
common dosing interval (\code{most_common_ii}) from dosing events (\code{EVID == 1}) across subjects.
This is done by computing the time difference between successive doses within each subject
and selecting the mode (most frequent value) of the rounded intervals.

This interval is used to define a time window for pooling observed concentrations
(\code{tad <= most_common_ii * 1.2}) to ensure data consistency within a typical dosing period.
This approach helps filter out excessively long or irregular post-dose observations
that may bias the pooled profile, especially under real-world or non-ideal dosing conditions.
}
\examples{
\dontrun{
processed_data <- processData(Bolus_1CPT)$dat
pooled <- get_pooled_data(processed_data, data_type = "combined_doses")
pooled$datpooled_all$binned.df
}

}
