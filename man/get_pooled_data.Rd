% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_pooled_data.R
\name{get_pooled_data}
\alias{get_pooled_data}
\title{Generate pooled data for pharmacokinetic analysis}
\usage{
get_pooled_data(
  dat,
  dose_type = c("first_dose", "repeated_doses", "combined_doses"),
  pooled_ctrl = pooled_control()
)
}
\arguments{
\item{dat}{A data frame containing pharmacokinetic data. The required columns depend on \code{dose_type}:
\itemize{
\item \code{"first_dose"}: \code{dose_number}, \code{iiobs}, \code{ID}, \code{TIME}, \code{DV}
\item \code{"repeated_doses"}: \code{EVID}, \code{AMT}, \code{tad}, \code{dose_number}, \code{iiobs}, \code{ID}, \code{TIME}, \code{DV}, \code{resetflag}
\item \code{"combined_doses"}: \code{EVID}, \code{tad}, \code{dose_number}, \code{ID}, \code{TIME}, \code{DV}, \code{resetflag}
}}

\item{dose_type}{Character string indicating the type of data to pool.
One of \code{"first_dose"}, \code{"repeated_doses"}, or \code{"combined_doses"}.
\itemize{
\item \code{"first_dose"} processes only the first dose of each subject.
\item \code{"repeated_doses"} processes doses beyond the first and their post-dose observations.
\item \code{"combined_doses"} merges both first and repeated dose data into a single dataset for pooled analysis.
}}

\item{pooled_ctrl}{A list of control options created by \code{\link{pooled_control}}.}
}
\value{
A list containing one or more of the following elements, depending on the \code{dose_type}:
\describe{
\item{\code{datpooled_fd}}{Binned data for the first dose (single-dose profiles).}
\item{\code{datpooled_efd}}{Binned data excluding the first dose (repeated-dose profiles).}
\item{\code{datpooled_all}}{Combined first and repeated dose data, for overall pooled analysis.}
}
}
\description{
Processes pharmacokinetic (PK) data and produces pooled datasets based on
the specified dosing scenario, with flexible control over binning and time-alignment behavior.
}
\details{
For \code{"repeated_doses"} and \code{"combined_doses"} data types, the function determines the most
common dosing interval (\code{most_common_ii}) based on dosing records (\code{EVID == 1}). This interval is
used to assess whether post-dose observations fall within the relevant dosing window.
If \code{tad_rounding} is TRUE, both the observed time after dose (\code{tad}) and the interval are rounded
before comparison, making the method more robust to minor time variations.
}
\examples{
\dontrun{
processed_data <- processData(Bolus_1CPT)$dat
pooled <- get_pooled_data(processed_data, dose_type = "combined_doses")
pooled$datpooled_all$binned.df
}

}
